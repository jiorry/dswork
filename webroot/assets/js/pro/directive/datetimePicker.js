require.config({baseUrl:"/assets/js",paths:{"bootstrap-datepicker":"dev/lib/bootstrap-datepicker"}}),define("ngDatetimePicker",["app","util","jquery","bootstrap-datepicker"],function(e,t){e.directive("ngDatetimePicker",["$rootScope",function(e){return{restrict:"AE",replace:!1,link:function(n,r,s){function m(e,t){if(!e)return;d?n[d][e].$setValidity(e,t):n[e].$setValidity(e,t)}function g(e){switch(e){case"hour":return 1;case"minute":return 2;default:return 0}}function y(){var e=l.datepicker("getDate");switch(c){case 1:e.setHours(parseInt(v.find("select.cmbhour").val()));break;case 2:e.setHours(parseInt(v.find("select.cmbhour").val())),e.setMinutes(parseInt(v.find("select.cmbmin").val()))}return e}function b(e){if(!e)return;r.data("date-value",e),l.datepicker(e),p.val(t.date2str(e)),v.find("select.cmbhour").val(e.getHours()),v.find("select.cmbmin").val(parseInt(e.getMinutes()/5)*5)}var o=new Date,u=s.start?t.str2date(s.start):new Date(o.getTime()-t.DATE_DAY*10),a=s.start?t.str2date(s.end):null,f,l,c,h,p=$('<input name="'+s.ngModel+'" type="text" date-type="datepicker" class="form-control">'),d=r.closest("form[name]");d=d.length==0?null:d.attr("name"),l=p.datepicker({language:e.language?e.language:"en_US",autoclose:!0,startDate:u,endDate:a,format:s.format?s.format:"yyyy-mm-dd"}),r.addClass("hidden"),f='<em class="fa fa-calendar"></em>',c=g(s.ngDatetimePicker),c>0&&(f+='<div style="display:inline;"><select class="form-control cmbhour">');if(c>=1){for(i=0;i<24;i++)h=i.toString(),f+='<option value="'+h+'">'+h+"</option>";f+="</select> h"}if(c==2){f+='<select class="form-control cmbmin">';for(i=0;i<12;i++)h=(i*5).toString(),f+='<option value="'+h+'">'+h+"</option>";f+="</select> m"}f+="</div>";var v=$(f);v.find("select").change(function(){p.trigger("changeDate")}),p.on("changeDate",function(){d?n[d][s.ngModel].$setViewValue(y()):n.$apply(function(){n[s.ngModel]=y()})}),n[s.ngModel]=o,s.rangePicker&&m(s.ngModel,!1),r.after(v),r.after(p),n.$watch(s.ngModel,function(e,t){if(!e){b(o);return}b(e);switch(s.rangePicker){case"begin":var n=r.parent().siblings(".datepicker").children("[ng-datetime-picker]");if(t&&e.getTime()!=t.getTime()){var i=e.getTime()<n.data("date-value");m(s.ngModel,i),m(n.attr("ng-model"),i)}break;case"end":var n=r.parent().siblings(".datepicker").children("[ng-datetime-picker]");if(t&&e.getTime()!=t.getTime()){var i=e.getTime()>n.data("date-value");m(s.ngModel,i),m(n.attr("ng-model"),i)}}})}}}])});
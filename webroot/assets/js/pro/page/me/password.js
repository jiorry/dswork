define("me.password",["app","ajax","util","appData"],function(e,t,n,r){return e.controller("MePasswordCtrl",["$scope","$element",function(e,i){function a(e){u.text(e).removeClass("hidden")}function f(){u.text("").addClass("hidden")}e.user=r.user,e.nick=r.user.nick;var s,o=t.NewClient("/api/open");o.send("public.site.Rsakey",null).done(function(e){s=e});var u=i.find("div.error-box");i.find(":input").keydown(function(){f()}),e.save=function(){var t=e.nick,r=e.registion.old_password.$viewValue,i=e.password,u=e.confirm_pwd;if(i!=u){a("两次输入的密码不匹配");return}var f=n.cipherString(s,t,i),l=n.cipherString(s,t,r);o.send("private.sign.ChangePassword",{cipher:f,old:l}).done(function(e){window.location.href="/"}).fail(function(e){var t=JSON.parse(e.responseText);a(t.message)})}}]),{title:"修改密码",goBackButton:!0,headerHtml:"",i18n:!1}});
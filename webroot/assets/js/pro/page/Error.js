define("util",["jquery"],function(){var e={};return e.DATE_DAY=864e5,e.DATE_HOUR=36e5,e.humanTime=function(t,n){typeof t=="string"&&(t=e.Str2date(t)),typeof n=="string"&&(n=e.Str2date(n));var r,i,s,o=Math.abs(n.getTime()-t.getTime())/1e3;return o>=31536e3?(r=o/31536e3,i=Math.round((r-Math.floor(r))*12),s=parseInt(r)+"年"+(i==0?"":i+"个月")):o>=2592e3?(r=o/2592e3,i=Math.round((r-Math.floor(r))*30),s=parseInt(r)+"个月"+(i==0?"":i+"天")):o>=86400?(r=o/86400,i=Math.round((r-Math.floor(r))*24),s=parseInt(r)+"天"+(i==0?"":i+"小时")):o>=3600?(r=o/3600,i=Math.round((r-Math.floor(r))*60),s=parseInt(r)+"小时"+(i==0?"":i+"分钟")):o>=60?(r=o/60,s=parseInt(r)+"分钟"):o<60&&(s=parseInt(o).toString()+"秒"),s},e.drawingActiveStatus=function(e,t){var n=t.user.id,r={is_js:!1,is_xmjl:!1,is_xmgl:!1,is_zt:!1,finish_js:!1,finish_xmjl:!1,finish_xmgl:!1,finish_zt:!1};return r.finish_xmjl=e.xmjl_sign_by>0,r.xmjl_can_unsign=e.xmjl_sign_by>0,e.xmjl_id==n&&(r.is_xmjl=!0),r.finish_js=e.js_sign_by>0,r.js_can_unsign=e.js_sign_by==n,t.draw_js_user_ids.indexOf(n.toString())>-1&&(r.is_js=!0),r.finish_sw=e.sw_sign_by>0,r.sw_can_unsign=e.sw_sign_by==n,t.draw_sw_user_ids.indexOf(n.toString())>-1&&(r.is_sw=!0),r.finish_xmgl=e.xmgl_sign_by>0,r.xmgl_can_unsign=e.xmgl_sign_by==n,t.draw_xmgl_user_ids.indexOf(n.toString())>-1&&(r.is_xmgl=!0),r.finish_zt=e.zt_sign_by>0,r.zt_can_unsign=e.zt_sign_by==n,t.draw_zt_user_ids.indexOf(n.toString())>-1&&(r.is_zt=!0),r},e.userAvatar=function(e){return!e||e==""?e="/assets/img/avatar_empty.png":e="/upload/avatar/"+e,e},e.setTitle=function(e){e||(e=""),$("#gos-headerTitle").text(e),document.title=e},e.str2date=function(e){return e=e.replace(/[A-Za-z]/g," ").substr(0,19),new Date(Date.parse(e))},e.date2str=function(e,t){if(!e)return"";switch(typeof e){case"number":e=new Date(e);break;case"string":e=this.str2date(e)}return t&&t=="time"?e.getFullYear()+"-"+this.lpad(e.getMonth()+1,"0",2)+"-"+this.lpad(e.getDate(),"0",2)+" "+this.lpad(e.getHours(),"0",2)+":"+this.lpad(e.getMinutes(),"0",2):e.getFullYear()+"-"+this.lpad(e.getMonth()+1,"0",2)+"-"+this.lpad(e.getDate(),"0",2)},e.getUrlParameter=function(e){var t=window.location.search.substring(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}},e.cipherString=function(t,n,r){var i=new RSAKey,s=Server.getTime().toString(),o=CryptoJS.MD5(s+n);i.setPublic(t.hex,"10001");var u=i.encrypt(e.lpad(s,"0",16)+o.toString(CryptoJS.enc.Base64)),a=n+"|"+r,f=e.aesEncrypto(a,s,o),l=t.keyid.toString()+"|"+CryptoJS.enc.Hex.parse(u.toString()).toString(CryptoJS.enc.Base64)+"|"+f.toString();return l},e.aesEncrypto=function(t,n,r){n=n.toString();var i=CryptoJS.MD5(e.lpad(n,"0",16)),s=CryptoJS.AES.encrypt(t,r,{iv:i});return s.ciphertext.toString(CryptoJS.enc.Base64)},e.aesDecrypto=function(t,n,r){n=n.toString();var i=CryptoJS.MD5(e.lpad(n,"0",16)),s={ciphertext:CryptoJS.enc.Base64.parse(t),salt:""};return decrypted=CryptoJS.AES.decrypt(s,r,{iv:i}),decrypted.toString(CryptoJS.enc.Utf8)},e.lpad=function(e,t,n){while(e.toString().length<n)e=t+e;return e},e.rpad=function(e,t,n){while(e.toString().length<n)e+=t;return e},e.objectFind=function(e,t,n){if(!n)return null;var r,i=n.length;for(r=0;r<i;r++)if(n[r]&&n[r][e]==t)return n[r];return null},e.objectFindIndex=function(e,t,n){if(!n)return-1;var r,i=n.length;for(r=0;r<i;r++)if(n[r]&&n[r][e]==t)return r;return-1},e.setCookie=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*864e5);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"},e.getCookie=function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},e.deleteCookie=function(e){this.SetCookie(e,"",-1)},e.getNick=function(){if(this.currentNick)return this.currentNick;var e=decodeURIComponent(this.getCookie("PUB_gosauth")),t=e.split("|");return t.length>1?this.currentNick=t[0]:this.currentNick=e,this.currentNick},e.getSecret=function(){return decodeURIComponent(this.getCookie("secret"))},e.scopeFormData=function(e){var t,n,r,i={};for(n in e){if(n.charAt(0)=="$")continue;t=e[n];if(!t)continue;if(typeof t.$$parentForm!="undefined"&&t.$valid)for(r in t){if(r.charAt(0)=="$")continue;t[r]&&typeof t[r].$modelValue!="undefined"?i[r]=t[r].$modelValue:i[r]=t[r].$viewValue}}return i},e}),define("loader",["util","jquery"],function(e){var t=$("#gos-goback"),n=$("#gos-headerBarR"),r=function(){this.defaultViewName="home.module";var r=$("#gos-Views");this.getViewName=function(e){var t=e.$$path=="/"?this.defaultViewName:e.$$path;return t.charAt(0)=="/"&&(t=t.substr(1)),t.replace(/\//g,".")},this.getViewPath=function(e){var t=this.getViewName();return t.replace(/\./g,"/")},this.buildHeader=function(r){r.goBackButton==0?t.hide():t.show(),r.headerHtml?n.html(r.headerHtml):n.empty(),e.setTitle(r.title)},this.loadview=function(e,t,n,r){var i={},s=n.defer(),o=this,u=t.substr(0,t.indexOf(".html"));return i[e]=u,require.config({paths:i}),require([e],function(t){if(t&&t.i18n){var n=r.language,i=e.split(".");n=n==""?"en_US":n,window._gos.transData=window._gos.transData||{},window._gos.transData[e]?s.resolve():$.getJSON(u.substr(0,u.indexOf(i.join("/")))+"/"+i[0]+"/locales/"+n+"/"+i[1]+".json").success(function(t){window._gos.transData[e]=t,s.resolve()}).fail(function(){n="en_US",$.getJSON(window._gos.srcPath+u+"/locales/"+n+"/"+typ+".json").success(function(t){window._gos.transData[e]=t,s.resolve()})})}else s.resolve();o.buildHeader(t)},function(e){s.reject()}),s.promise}};return new r}),window._gos=window._gos||{},define("app",["util","loader","angular","angular-route","angular-animate","angular-resource","jquery"],function(e,t){var n=angular.module("app",["ngResource","ngRoute","ngAnimate"]);return n.setTitle=function(t){e.setTitle(t)},n.run(["$rootScope","$location",function(t,n){var r="zh_CN";r||(r=navigator.language||navigator.userLanguage),r=r.replace("_","-").toLowerCase(),e.setCookie("lang",r),t.language=r}]),n.filter("t",["$location",function(e){return function(n,r){var i;r=r?r:t.getViewName(e);if(window._gos.transData&&window._gos.transData.hasOwnProperty(r)){i=window._gos.transData[r];if(i.hasOwnProperty(n))return i[n]}return n}}]),window._gos.viewstackRouter=window._gos.viewstackRouter||[],n.gosRouter=function(e,t,n,r){window._gos.viewstackRouter.push({router:e,name:t,templateUrl:window._gos.srcPath+t.split(".").join("/")+".html",group:r,controller:n})},window._gos.srcPath="/assets/js/"+MYENV+"/page/",n.gosRouter("/","home.module","HomeModuleCtrl"),n.gosRouter("/home/module","home.module","HomeModuleCtrl"),n.gosRouter("/drawing/form","drawing.form","DrawingFormCtrl"),n.gosRouter("/drawing/list","drawing.list","DrawingListCtrl"),n.gosRouter("/drawing/form/:id","drawing.form","DrawingFormCtrl"),n.gosRouter("/drawing/view/:id","drawing.view","DrawingViewCtrl"),n.gosRouter("/me/password","me.password","MePasswordCtrl"),n}),require.config({baseUrl:"/assets/js/",paths:{app:MYENV+"/mylib/app",appData:MYENV+"/mylib/appData",loader:MYENV+"/mylib/loader",util:MYENV+"/mylib/util",ajax:MYENV+"/mylib/ajax",gosEditor:MYENV+"/mylib/gos.editor",angular:MYENV+"/angular","angular-route":MYENV+"/angular-route","angular-animate":MYENV+"/angular-animate","angular-resource":MYENV+"/angular-resource"},shim:{app:{deps:["angular","angular-route","angular-animate","angular-resource","jquery"]},angular:{exports:"angular"},"angular-route":{deps:["angular"]},"angular-animate":{deps:["angular"]},"angular-resource":{deps:["angular"]}}}),require(["app"],function(e){e.run(["$rootScope",function(e){switch(window.location.pathname){case"/error/a":e.message="您没有相应的登录权限，请联系管理员！";break;case"/error/b":e.message="您没的权限不足，请联系管理员！"}}]),angular.bootstrap(document,["app"])}),define("page/Error",function(){});